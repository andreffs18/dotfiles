#!/usr/bin/env bash

# Install brew package manager
if test ! $(which brew); then
  echo | /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
else
  log.success "Ruby already installed: \"$(ruby -v)\""
fi
# Add ruby to $PATH
export PATH="$PATH:$(ruby -e 'puts Gem.user_dir')/bin"

# Update any recipes
brew update

log.info "1️⃣  ⚙️  Installing all Brewfile dependencies"
brew bundle --file=$DIRECTORY/install/Brewfile
log.info "2️⃣  🔨  Installing all Caskfile dependencies"
brew bundle --file=$DIRECTORY/install/Caskfile
log.info "3️⃣  🔧  Installing all Masfile dependencies"
brew bundle --file=$DIRECTORY/install/Masfile

# Remove brew and cask old formulas
brew cleanup
log.info "✅  All brew files installed!"

# Install oh-my-zsh framework
log.info "Configuring oh-my-zsh framework..."
source $DIRECTORY/config/mac/oh-my-zsh

# Install kitty terminal
log.info "Configuring kitty theme..."
source $DIRECTORY/config/mac/kitty

# Install pure prompt theme
log.info "Installing pure prompt theme..."
source $DIRECTORY/config/mac/pure-prompt

# Setup dock apps
log.info "Configure dock shortcuts..." 
source $DIRECTORY/config/mac/dockutil

# Install Lolcat 😂 (https://github.com/busyloop/lolcat)
log.info "Installing lolcat..."
gem install lolcat --user-install
echo "$(lolcat --version)" | lolcat

# Reminder to install missing apps
log.warning "Don't forget to install the following:\n👉  Exodus: https://www.exodus.io/download/\n👉  Final Cut Pro\n👉  Microsoft Excel/Word"
